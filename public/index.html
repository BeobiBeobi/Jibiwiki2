<!doctype html>
<html>
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js"></script>

    <style>
/* ë²„ë¹„ ìŠ¤íƒ€ì¼ - ë„¤ì´ë¹„ ë¸”ë£¨ í…Œë§ˆ */
.beobi-header {
        background: linear-gradient(45deg, #1e3799, #4a69bd) !important;
        border-bottom: none;
        padding: 15px 20px;
        border-radius: 10px 10px 0 0;
    }

    #BeobiPosts .list-group-item {
        border-left: 4px solid #4a69bd;
        transition: all 0.3s ease;
    }

    #BeobiPosts .list-group-item:hover {
        transform: translateY(-3px);
        box-shadow: 0 4px 12px rgba(74, 105, 189, 0.2);
        border-left: 4px solid #1e3799;
    }

    #BeobiPosts .post-username {
        background-color: #f1f2f6;
        color: #1e3799;
    }

    /* ì§€ë‹ˆ ìŠ¤íƒ€ì¼ - ê·¸ë¦° í…Œë§ˆ */
    .jini-header {
        background: linear-gradient(45deg, #20bf6b, #26de81) !important;
        border-bottom: none;
        padding: 15px 20px;
        border-radius: 10px 10px 0 0;
    }

    #JiniPosts .list-group-item {
        border-left: 4px solid #26de81;
        transition: all 0.3s ease;
    }

    #JiniPosts .list-group-item:hover {
        transform: translateY(-3px);
        box-shadow: 0 4px 12px rgba(38, 222, 129, 0.2);
        border-left: 4px solid #20bf6b;
    }

    #JiniPosts .post-username {
        background-color: #e8f3ec;
        color: #20bf6b;
    }

    /* ë˜¥ê°œ ìŠ¤íƒ€ì¼ - ì˜¤ë Œì§€ í…Œë§ˆ */
    .ddongge-header {
    background: linear-gradient(45deg, #ffd32a, #ffb142) !important;  /* ë…¸ë€ìƒ‰ ê·¸ë¼ë°ì´ì…˜ */
    border-bottom: none;
    padding: 15px 20px;
    border-radius: 10px 10px 0 0;
}

#DdonggaePosts .list-group-item {
    border-left: 4px solid #ffb142;  /* ì™¼ìª½ í…Œë‘ë¦¬ ë…¸ë€ìƒ‰ */
    transition: all 0.3s ease;
}

#DdonggaePosts .list-group-item:hover {
    transform: translateY(-3px);
    box-shadow: 0 4px 12px rgba(255, 211, 42, 0.2);  /* ë…¸ë€ìƒ‰ ê·¸ë¦¼ì */
    border-left: 4px solid #ffd32a;  /* í˜¸ë²„ ì‹œ ë” ë°ì€ ë…¸ë€ìƒ‰ */
}

#DdonggaePosts .post-username {
    background-color: #fff8e1;  /* ì—°í•œ ë…¸ë€ìƒ‰ ë°°ê²½ */
    color: #ffb142;  /* ë…¸ë€ìƒ‰ í…ìŠ¤íŠ¸ */
}

    /* ì„œë¹ˆ ìŠ¤íƒ€ì¼ - í¼í”Œ í…Œë§ˆ */
    .seobin-header {
        background: linear-gradient(45deg, #8854d0, #a55eea) !important;
        border-bottom: none;
        padding: 15px 20px;
        border-radius: 10px 10px 0 0;
    }

    #SeobinPosts .list-group-item {
        border-left: 4px solid #a55eea;
        transition: all 0.3s ease;
    }

    #SeobinPosts .list-group-item:hover {
        transform: translateY(-3px);
        box-shadow: 0 4px 12px rgba(165, 94, 234, 0.2);
        border-left: 4px solid #8854d0;
    }

    #SeobinPosts .post-username {
        background-color: #f3eefb;
        color: #8854d0;
    }

    /* ë‚¨ê·œ ìŠ¤íƒ€ì¼ - í„°ì½°ì´ì¦ˆ í…Œë§ˆ */
    .namgyu-header {
    background: linear-gradient(45deg, #2d3436, #636e72) !important;  /* íšŒìƒ‰ ê·¸ë¼ë°ì´ì…˜ */
    border-bottom: none;
    padding: 15px 20px;
    border-radius: 10px 10px 0 0;
}

#NamgyuPosts .list-group-item {
    border-left: 4px solid #636e72;  /* ì™¼ìª½ í…Œë‘ë¦¬ íšŒìƒ‰ */
    transition: all 0.3s ease;
}

#NamgyuPosts .list-group-item:hover {
    transform: translateY(-3px);
    box-shadow: 0 4px 12px rgba(45, 52, 54, 0.2);  /* íšŒìƒ‰ ê·¸ë¦¼ì */
    border-left: 4px solid #2d3436;  /* í˜¸ë²„ ì‹œ ë” ì§„í•œ íšŒìƒ‰ */
}

#NamgyuPosts .post-username {
    background-color: #f1f2f3;  /* ì—°í•œ íšŒìƒ‰ ë°°ê²½ */
    color: #2d3436;  /* ì§„í•œ íšŒìƒ‰ í…ìŠ¤íŠ¸ */
}

    /* ì„œì—° ìŠ¤íƒ€ì¼ - ë ˆë“œ í…Œë§ˆ */
    .seoyeon-header {
        background: linear-gradient(45deg, #eb3b5a, #fc5c65) !important;
        border-bottom: none;
        padding: 15px 20px;
        border-radius: 10px 10px 0 0;
    }

    #SeoyeonPosts .list-group-item {
        border-left: 4px solid #fc5c65;
        transition: all 0.3s ease;
    }

    #SeoyeonPosts .list-group-item:hover {
        transform: translateY(-3px);
        box-shadow: 0 4px 12px rgba(252, 92, 101, 0.2);
        border-left: 4px solid #eb3b5a;
    }

    #SeoyeonPosts .post-username {
        background-color: #fdeeef;
        color: #eb3b5a;
    }

    /* ìœ ë§Œ ìŠ¤íƒ€ì¼ - ìŠ¤ì¹´ì´ë¸”ë£¨ í…Œë§ˆ */
    .yumin-header {
        background: linear-gradient(45deg, #45aaf2, #2d98da) !important;
        border-bottom: none;
        padding: 15px 20px;
        border-radius: 10px 10px 0 0;
    }

    #YuminPosts .list-group-item {
        border-left: 4px solid #2d98da;
        transition: all 0.3s ease;
    }

    #YuminPosts .list-group-item:hover {
        transform: translateY(-3px);
        box-shadow: 0 4px 12px rgba(45, 152, 218, 0.2);
        border-left: 4px solid #3ea4ec;
    }

    #YuminPosts .post-username {
        background-color: #e9f5fc;
        color: #2d98da;
    }

       .jibi-header {
        background: linear-gradient(45deg, #FF69B4, #FFB6C1) !important;  /* í•‘í¬ìƒ‰ ê·¸ë¼ë°ì´ì…˜ */
        border-bottom: none;
        padding: 15px 20px;
        border-radius: 10px 10px 0 0;
    }

    #JibiPosts .list-group-item {
        border-left: 4px solid #FF69B4;  /* ì™¼ìª½ í…Œë‘ë¦¬ í•‘í¬ìƒ‰ */
        transition: all 0.3s ease;
    }

    #JibiPosts .list-group-item:hover {
        transform: translateY(-3px);
        box-shadow: 0 4px 12px rgba(255, 105, 180, 0.2);  /* í•‘í¬ìƒ‰ ê·¸ë¦¼ì */
        border-left: 4px solid #FF1493;  /* í˜¸ë²„ ì‹œ ë” ì§„í•œ í•‘í¬ìƒ‰ */
    }

    #JibiPosts .post-username {
        background-color: #FFF0F5;  /* ì—°í•œ í•‘í¬ìƒ‰ ë°°ê²½ */
        color: #FF69B4;  /* í•‘í¬ìƒ‰ í…ìŠ¤íŠ¸ */
    }

       .warning-link {
            color: #dc3545 !important;
            font-weight: bold !important;
            animation: pulse 2s infinite;
        }

        .warning-link:hover {
            color: #bd2130 !important;
            text-decoration: underline !important;
        }

        .upload-link {
            color: #007bff !important;
            font-weight: bold !important;
            transition: all 0.3s ease;
        }

        .upload-link:hover {
            color: #0056b3 !important;
            text-decoration: underline !important;
            transform: translateY(-2px);
        }

        
          .brand-logo {
            font-size: 1.8rem !important;
            font-weight: 800 !important;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            letter-spacing: 1px;
            transition: all 0.3s ease;
            padding: 5px 15px !important;
            border-radius: 10px;
            background: linear-gradient(45deg, #00b4db, #0083B0);  /* í•˜ëŠ˜ìƒ‰ ê·¸ë¼ë°ì´ì…˜ */
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
            -webkit-text-fill-color: transparent;
        }

        .brand-logo:hover {
            transform: scale(1.05);
            text-shadow: 3px 3px 6px rgba(0,0,0,0.2);
        }

        .brand-logo::before {
            content: "ğŸ“š";
            margin-right: 8px;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

            /* ê¸°ì¡´ ìŠ¤íƒ€ì¼ ìœ ì§€ */
    .logout-link {
        color: #6c757d !important;
        font-weight: bold !important;
        transition: all 0.3s ease;
    }

    .logout-link:hover {
        color: #5a6268 !important;
        transform: translateY(-2px);
    }

    .user-section {
        display: flex;
        align-items: center;
        gap: 15px;
    }

    .current-user {
        color: #495057;
        font-family: 'Noto Sans KR', sans-serif;
        font-size: 0.9rem;
    }

    .current-user strong {
        color: #00b4db;
        font-weight: bold;
    }

    .logout-btn {
        padding: 8px 16px;
        border-radius: 20px;
        font-weight: bold;
        font-size: 0.9rem;
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .logout-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }

    @media (max-width: 768px) {
        .user-section {
            margin-top: 10px;
            flex-direction: column;
            gap: 10px;
        }
    }
        
    .thinking-link {
        color: #6c757d !important;
        font-weight: bold !important;
        transition: all 0.3s ease;
        opacity: 0.8;
    }

    .thinking-link:hover {
        color: #5a6268 !important;
        transform: translateY(-2px);
        opacity: 1;
    }

    .thinking-animation {
        animation: thinking 1s infinite;
    }

    @keyframes thinking {
        0% { transform: rotate(0deg); }
        25% { transform: rotate(-10deg); }
        75% { transform: rotate(10deg); }
        100% { transform: rotate(0deg); }
    }
.card-header {
    background: linear-gradient(45deg, #f8f9fa, #ffffff);
    border-bottom: 3px solid;
    padding: 1.5rem;
}

.card-header h2 {
    font-size: 1.8rem;
    font-weight: 700;
    margin: 0;
    display: flex;
    align-items: center;
    gap: 10px;
}

/* ê° ì¹´í…Œê³ ë¦¬ë³„ ìƒ‰ìƒ í…Œë§ˆ */
.beobi-header {
    border-color: #FF6B6B;
}
.beobi-header h2:before {
    content: "ğŸ¦¦";
}

.jibi-header {
    border-color: #4ECDC4;
}
.jibi-header h2:before {
    content: "ğŸ‘½";
}

.jini-header {
    border-color: #45B7D1;
}
.jini-header h2:before {
    content: "ğŸ‘»";
}

.seobin-header {
    border-color: #96CEB4;
}
.seobin-header h2:before {
    content: "ğŸ‘¾";
}

.ddongge-header {
    border-color: #D4A373;
}
.ddongge-header h2:before {
    content: "ğŸ•";
}

.namgyu-header {
    border-color: #6C757D;
}
.namgyu-header h2:before {
    content: "ğŸ¥µ";
}

.seoyeon-header {
    border-color: #FF9F9F;
}
.seoyeon-header h2:before {
    content: "ğŸŒŸ";
}

.yumin-header {
    border-color: #95B8D1;
}
.yumin-header h2:before {
    content: "ğŸ˜¨";
}

/* í˜¸ë²„ íš¨ê³¼ */
.card-header:hover {
    transform: translateY(-2px);
    transition: transform 0.3s ease;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

/* ì •ë ¬ ë²„íŠ¼ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ë§ */
.sort-buttons {
    margin-top: 1rem;
    background: rgba(255, 255, 255, 0.7);
    border-radius: 10px;
    padding: 10px;
}

.sort-buttons .btn-group {
    display: flex;
    gap: 8px;
}

.sort-buttons .btn {
    border-radius: 20px;
    font-weight: 500;
    transition: all 0.3s ease;
    flex: 1;
}

/* ë°˜ì‘í˜• ë””ìì¸ */
@media (max-width: 768px) {
    .card-header h2 {
        font-size: 1.5rem;
    }
    
    .sort-buttons .btn {
        font-size: 0.8rem;
        padding: 0.375rem 0.5rem;
    }
}

/* ì¹´ë“œ ìŠ¤íƒ€ì¼ë§ */
.card {
    border: none;
    border-radius: 15px;
    box-shadow: 0 2px 15px rgba(0,0,0,0.05);
    overflow: hidden;
}

/* íƒ­ ë‚´ìš© ì—¬ë°± */
.tab-pane {
    padding: 20px 0;
}

.user-info {
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 5px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .user-level {
            font-weight: bold;
            margin-right: 10px;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .user-exp {
            color: #666;
            font-size: 0.9em;
        }

        .post-username .user-level {
            margin-left: 5px;
            font-size: 0.9em;
        }

        .level-icon {
            font-size: 1.2em;
            margin-right: 3px;
        }
    </style>
    <div class="container mt-4"></div>
        <div id="userInfo" class="mb-3"></div>
        
    <title>ì§€ë¹„ìœ„í‚¤</title>
    
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container">
          <a class="navbar-brand brand-logo" href="#">ì§€ë¹„ìœ„í‚¤</a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav">
              <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
              <ul class="navbar-nav mx-auto">
                  <li class="nav-item">
                      <a class="nav-link upload-link" href="/write">ğŸ“ ë…¼ë€ ì—…ë¡œë“œ</a>
                  </li>
                  <li class="nav-item">
                      <a class="nav-link warning-link" href="/warning">âš ï¸ ì£¼ì˜í•  ì </a>
                  </li>
                  <li class="nav-item"></li>
                    <a class="nav-link thinking-link" href="#" onclick="showThinking(event)">ğŸ¤” ê³ ë¯¼ì¤‘...</a>
                </li>
              </ul>
              <div class="user-section">
                  <span class="current-user">ğŸ‘¤ <strong id="currentUsername"></strong> ë‹˜</span>
                  <button class="btn btn-outline-danger logout-btn" onclick="handleLogout()">
                      ë¡œê·¸ì•„ì›ƒ
                  </button>
              </div>
          </div>
      </div>
  </nav>
            
            
          
          </li>
        </ul>
      </div>
    </nav>
    <div class="jumbotron jumbotron-fluid">
      <div class="container">
        <h1 class="display-4">í¬ë¦¬ìŠ¤í† í¼ ë†€ë€ ê°ë…ë„ ë†€ë¼ëŠ” ë…¼ë€ë“¤</h1>
        <p class="lead">ì¸ìƒì„ ì‚´ë©´ì„œ ê¸°ë¶„ì„ ë‚˜ì˜ê²Œ í•˜ê³  ì°½ë°±í•œ ì–¼êµ´ì— ê¹Œë§Œ ì •ì¥ì„ ì…ê³  ì£„ì†¡í•©ë‹ˆë‹¤ ì˜ìƒì„ ì°ì„ë§Œí•œ ë…¼ë€ ê±°ë¦¬ë“¤ì„ ëª¨ì•˜ì–´ìš”</p>
       
      </div>

      
    </div>
  </div>
  <div class="container mt-4">
    <h1 class="text-center mb-5">ë…¼ë€ë“¤</h1>
    <div class="row">
      <!-- ë²„ë¹„ ì„¹ì…˜ -->
      <ul class="nav nav-tabs mb-4" id="categoryTabs" role="tablist">
        <li class="nav-item">
            <a class="nav-link active" id="beobi-tab" data-toggle="tab" href="#beobi-content" role="tab">
                ë²„ë¹„ì˜ ë…¼ë€
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="jibi-tab" data-toggle="tab" href="#jibi-content" role="tab">
                ì§€ë¹„ì˜ ë…¼ë€
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="jini-tab" data-toggle="tab" href="#jini-content" role="tab">
                ì§€ë‹ˆì˜ ë…¼ë€
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="seobin-tab" data-toggle="tab" href="#seobin-content" role="tab">
                ì„œë¹ˆì˜ ë…¼ë€
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="ddonggae-tab" data-toggle="tab" href="#ddonggae-content" role="tab">
                ë˜¥ê°œì˜ ë…¼ë€
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="namgyu-tab" data-toggle="tab" href="#namgyu-content" role="tab">
                ë‚¨ê·œì˜ ë…¼ë€
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="seoyeon-tab" data-toggle="tab" href="#seoyeon-content" role="tab">
                ì„œì—°ì˜ ë…¼ë€
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="yumin-tab" data-toggle="tab" href="#yumin-content" role="tab">
                ìœ ë§Œì˜ ë…¼ë€
            </a>
        </li>
    </ul>
    <div class="tab-content" id="categoryTabContent">
        <!-- ë²„ë¹„ íƒ­ -->
        <div class="tab-pane fade show active" id="beobi-content" role="tabpanel">
            <div class="card mb-4">
                <div class="card-header beobi-header">
                    <h2>ë²„ë¹„ì˜ ë…¼ë€</h2>
                    <div class="sort-buttons">
                        <div class="btn-group" role="group">
                            <button class="btn btn-outline-primary btn-sm" onclick="sortPosts('latest', 'BeobiPosts')">
                                ìµœì‹ ìˆœ ğŸ”½
                            </button>
                            <button class="btn btn-outline-primary btn-sm" onclick="sortPosts('oldest', 'BeobiPosts')">
                                ì˜¤ë˜ëœìˆœ ğŸ”¼
                            </button>
                            <button class="btn btn-outline-danger btn-sm" onclick="sortPosts('likes', 'BeobiPosts')">
                                ì¢‹ì•„ìš”ìˆœ â¤ï¸
                            </button>
                            <button class="btn btn-outline-info btn-sm" onclick="sortPosts('explanation', 'BeobiPosts')">
                                í•´ëª…ìˆëŠ”ê¸€ ğŸ’¬
                            </button>
                        </div>
                    </div>
                </div>
                <ul class="list-group list-group-flush" id="BeobiPosts"></ul>
            </div>
        </div>

        <div class="tab-pane fade" id="jibi-content" role="tabpanel">
            <div class="card mb-4">
                <div class="card-header jibi-header">
                    <h2>ì§€ë¹„ì˜ ë…¼ë€</h2>
                    <div class="sort-buttons">
                        <div class="btn-group" role="group">
                            <button class="btn btn-outline-primary btn-sm" onclick="sortPosts('latest', 'JibiPosts')">
                                ìµœì‹ ìˆœ ğŸ”½
                            </button>
                            <button class="btn btn-outline-primary btn-sm" onclick="sortPosts('oldest', 'JibiPosts')">
                                ì˜¤ë˜ëœìˆœ ğŸ”¼
                            </button>
                            <button class="btn btn-outline-danger btn-sm" onclick="sortPosts('likes', 'JibiPosts')">
                                ì¢‹ì•„ìš”ìˆœ â¤ï¸
                            </button>
                            <button class="btn btn-outline-info btn-sm" onclick="sortPosts('explanation', 'JibiPosts')">
                                í•´ëª…ìˆëŠ”ê¸€ ğŸ’¬
                            </button>
                        </div>
                    </div>
                </div>
                <ul class="list-group list-group-flush" id="JibiPosts"></ul>
            </div>
        </div>
    
        <!-- ì§€ë‹ˆ íƒ­ -->
        <div class="tab-pane fade" id="jini-content" role="tabpanel">
            <div class="card mb-4">
                <div class="card-header jini-header">
                    <h2>ì§€ë‹ˆì˜ ë…¼ë€</h2>
                    <div class="sort-buttons">
                        <div class="btn-group" role="group">
                            <button class="btn btn-outline-primary btn-sm" onclick="sortPosts('latest', 'JiniPosts')">
                                ìµœì‹ ìˆœ ğŸ”½
                            </button>
                            <button class="btn btn-outline-primary btn-sm" onclick="sortPosts('oldest', 'JiniPosts')">
                                ì˜¤ë˜ëœìˆœ ğŸ”¼
                            </button>
                            <button class="btn btn-outline-danger btn-sm" onclick="sortPosts('likes', 'JiniPosts')">
                                ì¢‹ì•„ìš”ìˆœ â¤ï¸
                            </button>
                            <button class="btn btn-outline-info btn-sm" onclick="sortPosts('explanation', 'JiniPosts')">
                                í•´ëª…ìˆëŠ”ê¸€ ğŸ’¬
                            </button>
                        </div>
                    </div>
                </div>
                <ul class="list-group list-group-flush" id="JiniPosts"></ul>
            </div>
        </div>
    
        <!-- ì„œë¹ˆ íƒ­ -->
        <div class="tab-pane fade" id="seobin-content" role="tabpanel">
            <div class="card mb-4">
                <div class="card-header seobin-header">
                    <h2>ì„œë¹ˆì˜ ë…¼ë€</h2>
                    <div class="sort-buttons">
                        <div class="btn-group" role="group">
                            <button class="btn btn-outline-primary btn-sm" onclick="sortPosts('latest', 'SeobinPosts')">
                                ìµœì‹ ìˆœ ğŸ”½
                            </button>
                            <button class="btn btn-outline-primary btn-sm" onclick="sortPosts('oldest', 'SeobinPosts')">
                                ì˜¤ë˜ëœìˆœ ğŸ”¼
                            </button>
                            <button class="btn btn-outline-danger btn-sm" onclick="sortPosts('likes', 'SeobinPosts')">
                                ì¢‹ì•„ìš”ìˆœ â¤ï¸
                            </button>
                            <button class="btn btn-outline-info btn-sm" onclick="sortPosts('explanation', 'SeobinPosts')">
                                í•´ëª…ìˆëŠ”ê¸€ ğŸ’¬
                            </button>
                        </div>
                    </div>
                </div>
                <ul class="list-group list-group-flush" id="SeobinPosts"></ul>
            </div>
        </div>
    
        <!-- ë˜¥ê°œ íƒ­ -->
        <div class="tab-pane fade" id="ddonggae-content" role="tabpanel">
            <div class="card mb-4">
                <div class="card-header ddongge-header">
                    <h2>ë˜¥ê°œì˜ ë…¼ë€</h2>
                    <div class="sort-buttons">
                        <div class="btn-group" role="group">
                            <button class="btn btn-outline-primary btn-sm" onclick="sortPosts('latest', 'DdonggaePosts')">
                                ìµœì‹ ìˆœ ğŸ”½
                            </button>
                            <button class="btn btn-outline-primary btn-sm" onclick="sortPosts('oldest', 'DdonggaePosts')">
                                ì˜¤ë˜ëœìˆœ ğŸ”¼
                            </button>
                            <button class="btn btn-outline-danger btn-sm" onclick="sortPosts('likes', 'DdonggaePosts')">
                                ì¢‹ì•„ìš”ìˆœ â¤ï¸
                            </button>
                            <button class="btn btn-outline-info btn-sm" onclick="sortPosts('explanation', 'DdonggaePosts')">
                                í•´ëª…ìˆëŠ”ê¸€ ğŸ’¬
                            </button>
                        </div>
                    </div>
                </div>
                <ul class="list-group list-group-flush" id="DdonggaePosts"></ul>
            </div>
        </div>
    
        <!-- ë‚¨ê·œ íƒ­ -->
        <div class="tab-pane fade" id="namgyu-content" role="tabpanel">
            <div class="card mb-4">
                <div class="card-header namgyu-header">
                    <h2>ë‚¨ê·œì˜ ë…¼ë€</h2>
                    <div class="sort-buttons">
                        <div class="btn-group" role="group">
                            <button class="btn btn-outline-primary btn-sm" onclick="sortPosts('latest', 'NamgyuPosts')">
                                ìµœì‹ ìˆœ ğŸ”½
                            </button>
                            <button class="btn btn-outline-primary btn-sm" onclick="sortPosts('oldest', 'NamgyuPosts')">
                                ì˜¤ë˜ëœìˆœ ğŸ”¼
                            </button>
                            <button class="btn btn-outline-danger btn-sm" onclick="sortPosts('likes', 'NamgyuPosts')">
                                ì¢‹ì•„ìš”ìˆœ â¤ï¸
                            </button>
                            <button class="btn btn-outline-info btn-sm" onclick="sortPosts('explanation', 'NamgyuPosts')">
                                í•´ëª…ìˆëŠ”ê¸€ ğŸ’¬
                            </button>
                        </div>
                    </div>
                </div>
                <ul class="list-group list-group-flush" id="NamgyuPosts"></ul>
            </div>
        </div>
    
        <!-- ì„œì—° íƒ­ -->
        <div class="tab-pane fade" id="seoyeon-content" role="tabpanel">
            <div class="card mb-4">
                <div class="card-header seoyeon-header">
                    <h2>ì„œì—°ì˜ ë…¼ë€</h2>
                    <div class="sort-buttons">
                        <div class="btn-group" role="group">
                            <button class="btn btn-outline-primary btn-sm" onclick="sortPosts('latest', 'SeoyeonPosts')">
                                ìµœì‹ ìˆœ ğŸ”½
                            </button>
                            <button class="btn btn-outline-primary btn-sm" onclick="sortPosts('oldest', 'SeoyeonPosts')">
                                ì˜¤ë˜ëœìˆœ ğŸ”¼
                            </button>
                            <button class="btn btn-outline-danger btn-sm" onclick="sortPosts('likes', 'SeoyeonPosts')">
                                ì¢‹ì•„ìš”ìˆœ â¤ï¸
                            </button>
                            <button class="btn btn-outline-info btn-sm" onclick="sortPosts('explanation', 'SeoyeonPosts')">
                                í•´ëª…ìˆëŠ”ê¸€ ğŸ’¬
                            </button>
                        </div>
                    </div>
                </div>
                <ul class="list-group list-group-flush" id="SeoyeonPosts"></ul>
            </div>
        </div>
    
        <!-- ìœ ë§Œ íƒ­ -->
        <div class="tab-pane fade" id="yumin-content" role="tabpanel">
            <div class="card mb-4">
                <div class="card-header yumin-header">
                    <h2>ìœ ë§Œì˜ ë…¼ë€</h2>
                    <div class="sort-buttons">
                        <div class="btn-group" role="group">
                            <button class="btn btn-outline-primary btn-sm" onclick="sortPosts('latest', 'YuminPosts')">
                                ìµœì‹ ìˆœ ğŸ”½
                            </button>
                            <button class="btn btn-outline-primary btn-sm" onclick="sortPosts('oldest', 'YuminPosts')">
                                ì˜¤ë˜ëœìˆœ ğŸ”¼
                            </button>
                            <button class="btn btn-outline-danger btn-sm" onclick="sortPosts('likes', 'YuminPosts')">
                                ì¢‹ì•„ìš”ìˆœ â¤ï¸
                            </button>
                            <button class="btn btn-outline-info btn-sm" onclick="sortPosts('explanation', 'YuminPosts')">
                                í•´ëª…ìˆëŠ”ê¸€ ğŸ’¬
                            </button>
                        </div>
                    </div>
                </div>
                <ul class="list-group list-group-flush" id="YuminPosts"></ul>
            </div>
        </div>
    </div>
    
</div>
  </div>
  <head>
    <!-- ê¸°ì¡´ ì½”ë“œ ìœ ì§€ -->
    <style>
         .navbar {
        padding: 15px 0;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .navbar-nav {
        gap: 20px;  /* ë©”ë‰´ í•­ëª© ì‚¬ì´ ê°„ê²© */
    }

    .nav-link {
        padding: 8px 16px !important;
    }

    .user-section {
        display: flex;
        align-items: center;
        gap: 15px;
    }

    .current-user {
        color: #495057;
        font-family: 'Noto Sans KR', sans-serif;
        font-size: 0.95rem;
        margin-right: 5px;
    }

    .current-user strong {
        color: #00b4db;
        font-weight: bold;
    }

    .logout-btn {
        padding: 6px 16px;
        border-radius: 20px;
        font-size: 0.9rem;
        font-weight: 500;
        transition: all 0.3s ease;
    }

    .logout-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 2px 4px rgba(220,53,69,0.2);
    }

    .brand-logo {
        margin-right: 30px;
    }

    .upload-link, .warning-link {
        border-radius: 20px;
        transition: all 0.3s ease;
    }

    .upload-link:hover, .warning-link:hover {
        background-color: rgba(0,0,0,0.05);
    }

    @media (max-width: 991px) {
        .navbar-collapse {
            margin-top: 15px;
        }

        .user-section {
            margin-top: 15px;
            justify-content: center;
        }

        .navbar-nav {
            text-align: center;
            margin: 15px 0;
        }
    }

    .list-group-item {
        border: none;
        border-radius: 15px !important;
        margin-bottom: 15px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        transition: all 0.3s ease;
        padding: 20px;
        background: white;
    }

    .list-group-item:hover {
        transform: translateY(-3px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    .post-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
        padding-bottom: 8px;
        border-bottom: 1px solid #eee;
    }

    .post-title {
        font-family: 'Poor Story', cursive;
        font-size: 1.3rem;
        color: #2c3e50;
        margin-right: 10px;
    }

    .post-username {
        font-family: 'Noto Sans KR', sans-serif;
        background-color: #e3f2fd;
        color: #1976d2;
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 0.9rem;
        font-weight: 500;
    }

    .post-content {
        font-family: 'Noto Sans KR', sans-serif;
        color: #444;
        line-height: 1.6;
        margin: 15px 0;
        font-size: 1rem;
    }

    .post-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 15px;
        padding-top: 10px;
        border-top: 1px solid #eee;
    }

    .post-timestamp {
        color: #888;
        font-size: 0.85rem;
    }

    .delete-btn {
        padding: 5px 15px;
        border-radius: 15px;
        font-size: 0.9rem;
        transition: all 0.2s ease;
    }

    .delete-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 2px 4px rgba(220,53,69,0.2);
    }

    .btn-like {
        background: none;
        border: none;
        padding: 5px 10px;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .btn-like:hover {
        transform: scale(1.1);
    }

    .btn-like.liked {
        animation: like-animation 0.3s ease;
    }

    .like-count {
        font-size: 0.9rem;
        color: #666;
        margin-left: 5px;
    }

    .post-actions {
        display: flex;
        align-items: center;
        gap: 5px;
    }

    @keyframes like-animation {
        0% { transform: scale(1); }
        50% { transform: scale(1.2); }
        100% { transform: scale(1); }
    }

    .explanation-box {
        background-color: #f8f9fa;
        border-left: 3px solid #007bff;
        padding: 10px;
        margin: 10px 0;
        border-radius: 5px;
    }

    .explanation-label {
        font-weight: bold;
        color: #007bff;
        margin-right: 8px;
    }

    .explanation-content {
        color: #495057;
    }

    .explanation-time {
        display: block;
        color: #6c757d;
        font-size: 0.8rem;
        margin-top: 5px;
    }

    .explanation-form {
        display: flex;
        gap: 10px;
        margin: 10px 0;
    }

    .explanation-input {
        flex: 1;
        border-radius: 20px;
        padding: 5px 15px;
    }

    .explanation-form button {
        border-radius: 20px;
        padding: 5px 15px;
    }

    .sort-buttons {
    padding: 10px;
    background-color: #f8f9fa;
    border-bottom: 1px solid #dee2e6;
}

.sort-buttons .btn-group {
    width: 100%;
    display: flex;
    gap: 5px;
}

.sort-buttons .btn {
    flex: 1;
    font-size: 0.8rem;
    padding: 5px;
}

.sort-buttons .btn:hover {
    transform: translateY(-2px);
    transition: transform 0.2s;
}

.btn-outline-primary:hover {
    background-color: #007bff;
    color: white;
}

.btn-outline-danger:hover {
    background-color: #dc3545;
    color: white;
}

.btn-outline-info:hover {
    background-color: #17a2b8;
    color: white;
}

.nav-tabs {
    border-bottom: 2px solid #dee2e6;
}

.nav-tabs .nav-link {
    border: none;
    color: #495057;
    font-weight: 500;
    padding: 12px 20px;
    transition: all 0.3s ease;
}

.nav-tabs .nav-link:hover {
    border: none;
    color: #007bff;
}

.nav-tabs .nav-link.active {
    border: none;
    border-bottom: 3px solid #007bff;
    color: #007bff;
    font-weight: 600;
}

/* ë°˜ì‘í˜• íƒ­ */
@media (max-width: 768px) {
    .nav-tabs {
        display: flex;
        flex-wrap: nowrap;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }
    
    .nav-tabs .nav-item {
        white-space: nowrap;
    }
    
    .nav-tabs::-webkit-scrollbar {
        display: none;
    }
}

/* ê¸°ì¡´ ìŠ¤íƒ€ì¼ ìœ ì§€ */
.sort-buttons {
    padding: 10px;
    background-color: #f8f9fa;
    border-bottom: 1px solid #dee2e6;
}

.sort-buttons .btn-group {
    width: 100%;
    display: flex;
    gap: 5px;
}

.sort-buttons .btn {
    flex: 1;
    font-size: 0.8rem;
    padding: 5px;
}

.card-header {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.card-header h2 {
    margin: 0;
}


.like-container {
    display: flex;
    align-items: center;
    gap: 4px;
}

.like-text {
    font-size: 0.8rem;
    color: #6c757d;
    margin-right: 2px;
}

.btn-like {
    padding: 0;
    border: none;
    background: none;
    cursor: pointer;
    transition: transform 0.2s;
}

.btn-like:hover {
    transform: scale(1.2);
}

.like-count {
    font-size: 0.9rem;
    color: #6c757d;
}

/* ì¢‹ì•„ìš” ëˆŒë €ì„ ë•Œ í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
.btn-like.liked + .like-text {
    color: #dc3545;
    font-weight: 500;
}

.user-info {
    padding: 10px;
    background-color: #f8f9fa;
    border-radius: 5px;
    margin-bottom: 15px;
}

.user-level {
    font-weight: bold;
    margin-right: 10px;
}

.user-exp {
    color: #666;
}

.post-username .user-level {
    margin-left: 5px;
    font-size: 0.9em;
}

.post-username .level-badge {
    font-size: 0.8em;
    padding: 2px 6px;
    border-radius: 10px;
    margin-left: 5px;
    display: inline-flex;
    align-items: center;
    gap: 3px;
}

.level-bronze { background-color: #CD7F32; color: white; }
.level-silver { background-color: #C0C0C0; color: white; }
.level-gold { background-color: #FFD700; color: black; }
.level-platinum { background-color: #E5E4E2; color: black; }
.level-diamond { background-color: #B9F2FF; color: black; }
.level-master { background-color: #FF4500; color: white; }


@keyframes levelUpAnimation {
        0% {
            transform: scale(1);
            opacity: 0;
        }
        50% {
            transform: scale(1.5);
            opacity: 1;
        }
        100% {
            transform: scale(1);
            opacity: 0;
        }
    }

    .level-up-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        opacity: 0;
        pointer-events: none;
    }

    .level-up-content {
        text-align: center;
        color: white;
        animation: levelUpAnimation 2s ease-in-out;
    }

    .level-up-icon {
        font-size: 5em;
        margin-bottom: 20px;
    }

    .level-up-text {
        font-size: 2em;
        font-weight: bold;
        margin-bottom: 10px;
    }

    .confetti {
        position: absolute;
        width: 10px;
        height: 10px;
        background: #f00;
        animation: confetti-fall 3s linear infinite;
    }

    @keyframes confetti-fall {
        0% {
            transform: translateY(-100vh) rotate(0deg);
        }
        100% {
            transform: translateY(100vh) rotate(360deg);
        }
    }



    </style>
</head>

  </div>
    
    <script>



async function handleLike(postId) {
        try {
            const username = localStorage.getItem('username');
            if (!username) {
                alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                return;
            }

            const response = await fetch(`/post/${postId}/like`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ username })
            });

            const data = await response.json();
            if (response.ok) {
                const likeButton = document.querySelector(`#like-btn-${postId}`);
                const likeCount = document.querySelector(`#like-count-${postId}`);
                
                likeButton.classList.toggle('liked');
                likeCount.textContent = data.likes;
                
                // ì¢‹ì•„ìš” ìƒíƒœì— ë”°ë¼ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ë³€ê²½
                if (data.hasLiked) {
                    likeButton.innerHTML = 'â¤ï¸';
                } else {
                    likeButton.innerHTML = 'ğŸ¤';
                }
            }
        } catch (error) {
            console.error('ì¢‹ì•„ìš” ì˜¤ë¥˜:', error);
            alert('ì¢‹ì•„ìš” ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        }
    }
    let postsCache = {
    BeobiPosts: [],
    JibiPosts: [],
    JiniPosts: [],
    SeobinPosts: [],
    DdonggaePosts: [],
    NamgyuPosts: [],
    SeoyeonPosts: [],
    YuminPosts: []
};
       // ë¡œê·¸ì¸ ì²´í¬ ë° ì‚¬ìš©ì ì´ë¦„ í‘œì‹œ
    const username = localStorage.getItem('username');
    if (!username) {
        window.location.href = '/login.html';
    } else {
        document.getElementById('currentUsername').textContent = username;
    }

    // ë¡œê·¸ì•„ì›ƒ í•¨ìˆ˜
    function handleLogout() {
        if(confirm('ì •ë§ ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            localStorage.removeItem('username');
            window.location.href = '/login.html';
        }
    }

    function isMasterUser(user) {
        return user === 'master@0422';
    }

    $(document).ready(function() {
    // íƒ­ ì „í™˜ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    $('#categoryTabs a').on('shown.bs.tab', function (e) {
        const targetId = $(e.target).attr('href').replace('-content', 'Posts');
        sortPosts('latest', targetId.substring(1));
    });

    // ì´ˆê¸° ë°ì´í„° ë¡œë“œ
    fetch('/posts')
        .then(response => response.json())
        .then(posts => {
            posts.forEach(post => {
                if (post.category === 'ë²„ë¹„') {
                    postsCache.BeobiPosts.push(post);
                } else if (post.category === 'ì§€ë¹„') {
                    postsCache.JibiPosts.push(post);
                } else if (post.category === 'ì§€ë‹ˆ') {
                    postsCache.JiniPosts.push(post);
                } else if (post.category === 'ì„œë¹ˆ') {
                    postsCache.SeobinPosts.push(post);
                } else if (post.category === 'ë˜¥ê°œ') {
                    postsCache.DdonggaePosts.push(post);
                } else if (post.category === 'ë‚¨ê·œ') {
                    postsCache.NamgyuPosts.push(post);
                } else if (post.category === 'ì„œì—°') {
                    postsCache.SeoyeonPosts.push(post);
                } else if (post.category === 'ìœ ë§Œ') {
                    postsCache.YuminPosts.push(post);
                }
            });

            // ì´ˆê¸° ë Œë”ë§
            Object.keys(postsCache).forEach(categoryId => {
                sortPosts('latest', categoryId);
            });
        });
});

    function sortPosts(sortType, categoryId) {
    const posts = [...postsCache[categoryId]];
    const container = document.getElementById(categoryId);
    
    switch(sortType) {
        case 'latest':
            posts.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            break;
        case 'oldest':
            posts.sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));
            break;
        case 'likes':
            posts.sort((a, b) => b.likes.count - a.likes.count);
            break;
        case 'explanation':
            posts.sort((a, b) => {
                if (a.explanation && !b.explanation) return -1;
                if (!a.explanation && b.explanation) return 1;
                return new Date(b.timestamp) - new Date(a.timestamp);
            });
            break;
    }
    
    container.innerHTML = '';
    renderPosts(posts, categoryId);
}

async function renderPosts(posts, containerId) {
    const container = document.getElementById(containerId);
    const currentUser = localStorage.getItem('username');
    container.innerHTML = '';

    for (const post of posts) {
        try {
            // ê²Œì‹œë¬¼ ì‘ì„±ìì˜ ë“±ê¸‰ ì •ë³´ ì¡°íšŒ
            const userResponse = await fetch(`/user/${post.username}`);
            const userData = await userResponse.json();

            const listItem = document.createElement('div');
            listItem.className = 'list-group-item';

            const levelIcons = {
                'ì£ë°¥': 'ğŸ‘',
                'ì¼ë°˜ì¸': 'ğŸ‘¨â€ğŸ¦²',
                'ë…¼ë€ ì‘ê°€': 'âœ',
                'ë…¼ë€ì˜ ë‹¬ì¸': 'ğŸ’ ',
                'ë…¼ë€ì˜ ì‹ ': 'ğŸ’',
                'ë…¼ë€ ê·¸ìì²´': 'ğŸ‘‘'
            };

            const levelClasses = {
                'ì£ë°¥': 'level-bronze',
                'ì¼ë°˜ì¸': 'level-silver',
                'ë…¼ë€ ì‘ê°€': 'level-gold',
                'ë…¼ë€ì˜ ë‹¬ì¸': 'level-platinum',
                'ë…¼ë€ì˜ ì‹ ': 'level-diamond',
                'ë…¼ë€ ê·¸ìì²´': 'level-master'
            };

        // ê¶Œí•œ ì²´í¬
        const isAdmin = currentUser === 'master@0422';
        const canDelete = post.username === currentUser || isAdmin;
        const canExplain = (
            (post.category === 'ë²„ë¹„' && username === 'ë²„ë¹„(ì¡°XX)') ||
        (post.category === 'ì§€ë¹„' && username === 'ì§€ë¹„(ë°•XX)') ||
        (post.category === 'ì§€ë‹ˆ' && username === 'ì§€ë‹ˆ(ê¹€XX)') ||
        (post.category === 'ì„œë¹ˆ' && username === 'ì„œë¹ˆ(ê¹€XX)') ||
        (post.category === 'ì„œì—°' && username === 'ì„œì—°(ë‚¨XX)') ||
        (post.category === 'ìœ ë§Œ' && username === 'ìœ ë§Œ(ì´XX)') ||
        (post.category === 'ë‚¨ê·œ' && username === 'ë‚¨ê·œ(ê¹€XX)') ||
        (post.category === 'ë˜¥ê°œ' && username === 'ë˜¥ê°œ(ì„œXX)') ||
        username === 'master@0422'
        ) && !post.explanation;

        // í•´ëª… ì‚­ì œ ê¶Œí•œ ì²´í¬
        const canDeleteExplanation = (
            (post.category === 'ë²„ë¹„' && username === 'ë²„ë¹„(ì¡°XX)') ||
        (post.category === 'ì§€ë¹„' && username === 'ì§€ë¹„(ë°•XX)') ||
        (post.category === 'ì§€ë‹ˆ' && username === 'ì§€ë‹ˆ(ê¹€XX)') ||
        (post.category === 'ì„œë¹ˆ' && username === 'ì„œë¹ˆ(ê¹€XX)') ||
        (post.category === 'ì„œì—°' && username === 'ì„œì—°(ë‚¨XX)') ||
        (post.category === 'ìœ ë§Œ' && username === 'ìœ ë§Œ(ì´XX)') ||
        (post.category === 'ë‚¨ê·œ' && username === 'ë‚¨ê·œ(ê¹€XX)') ||
        (post.category === 'ë˜¥ê°œ' && username === 'ë˜¥ê°œ(ì„œXX)') ||
        username === 'master@0422'||
            isAdmin
        );

        const hasLiked = post.likes?.users?.some(like => like.username === currentUser);

        // í•´ëª… ê´€ë ¨ HTML
        let explanationHTML = '';
        if (post.explanation) {
            explanationHTML = `
                <div class="explanation-box">
                    <div class="explanation-header d-flex justify-content-between align-items-center">
                        <span class="explanation-label">ğŸ’¬ í•´ëª…:</span>
                        ${canDeleteExplanation ? `
                            <button class="btn btn-sm btn-outline-danger delete-explanation-btn"
                                    onclick="deleteExplanation('${post._id}')">
                                âŒ í•´ëª… ì‚­ì œ
                            </button>
                        ` : ''}
                    </div>
                    <span class="explanation-content">${post.explanation.content}</span>
                    <small class="explanation-time">
                        ${new Date(post.explanation.timestamp).toLocaleString()}
                    </small>
                </div>
            `;
        } else if (canExplain) {
            explanationHTML = `
                <div class="explanation-form mt-2">
                    <div class="input-group">
                        <input type="text" 
                               id="explanation-input-${post._id}" 
                               class="form-control" 
                               maxlength="30" 
                               placeholder="30ì ì´ë‚´ë¡œ í•´ëª…í•˜ê¸°">
                        <div class="input-group-append">
                            <button class="btn btn-primary" 
                                    onclick="addExplanation('${post._id}')">
                                í•´ëª…í•˜ê¸°
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        listItem.innerHTML = `
                <div class="post-header">
                    <span class="post-title">ğŸ“Œ ${post.title || ''}</span>
                    <span class="post-username">
                        ğŸ‘¤ ${post.username || ''} 
                        <span class="level-badge ${levelClasses[userData.level]}">
                            ${levelIcons[userData.level]} ${userData.level}
                        </span>
                    </span>
                </div>
                <div class="post-content">
                    ${post.description || ''}
                </div>
            ${explanationHTML}
            <div class="post-footer">
                <div class="post-actions">
                    <div class="like-container">
                        <button id="like-btn-${post._id}" 
                                class="btn btn-like ${hasLiked ? 'liked' : ''}"
                                onclick="handleLike('${post._id}')">
                            ${hasLiked ? 'â¤ï¸' : 'ğŸ¤'}
                        </button>
                        <span class="like-text">ì¸ì •</span>
                        <span id="like-count-${post._id}" class="like-count">
                            ${post.likes?.count || 0}
                        </span>
                    </div>
                </div>
                <span class="post-timestamp">
                    â° ${new Date(post.timestamp).toLocaleString()}
                </span>
                ${canDelete ? `
                    <button class="btn btn-outline-danger btn-sm delete-btn" 
                            onclick="deletePost('${post._id}')">
                        ğŸ—‘ï¸ ì‚­ì œ
                    </button>
                ` : ''}
            </div>
        `;
        container.appendChild(listItem);
                } catch (error) {
                    console.error('ê²Œì‹œë¬¼ ë Œë”ë§ ì˜¤ë¥˜:', error);
                }
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', () => {
            displayUserInfo();
        });


window.addExplanation = async function(postId) {
    try {
        const input = document.getElementById(`explanation-input-${postId}`);
        const content = input.value.trim();
        
        if (!content) {
            alert('í•´ëª… ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            return;
        }

        if (content.length > 30) {
            alert('í•´ëª…ì€ 30ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            return;
        }

        const username = localStorage.getItem('username');
        if (!username) {
            alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
            return;
        }

        const response = await fetch(`/post/${postId}/explain`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ content, username })
        });

        const data = await response.json();

        if (!response.ok) {
            throw new Error(data.error || 'í•´ëª… ì €ì¥ ì‹¤íŒ¨');
        }

        alert('í•´ëª…ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
        window.location.reload();

    } catch (error) {
        console.error('í•´ëª… ì €ì¥ ì˜¤ë¥˜:', error);
        alert(error.message || 'í•´ëª… ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    }
};

window.deleteExplanation = async function(postId) {
    try {
        if (!confirm('ì •ë§ ì´ í•´ëª…ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            return;
        }

        const username = localStorage.getItem('username');
        if (!username) {
            alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
            return;
        }

        const response = await fetch(`/post/${postId}/explain`, {
            method: 'DELETE',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ username })
        });

        const data = await response.json();

        if (!response.ok) {
            throw new Error(data.error || 'í•´ëª… ì‚­ì œ ì‹¤íŒ¨');
        }

        alert('í•´ëª…ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
        window.location.reload();

    } catch (error) {
        console.error('í•´ëª… ì‚­ì œ ì˜¤ë¥˜:', error);
        alert(error.message || 'í•´ëª… ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    }
};

    async function addExplanation(postId) {
    try {
        const username = localStorage.getItem('username');
        const input = document.getElementById(`explanation-input-${postId}`);
        const explanation = input.value.trim();

        if (!explanation) {
            alert('í•´ëª… ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            return;
        }

        if (explanation.length > 30) {
            alert('í•´ëª…ì€ 30ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            return;
        }

        const response = await fetch(`/post/${postId}/explain`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ username, explanation })
        });

        const data = await response.json();
        if (response.ok) {
            alert('í•´ëª…ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.');
            window.location.reload();
        } else {
            alert(data.error);
        }
    } catch (error) {
        console.error('í•´ëª… ì¶”ê°€ ì˜¤ë¥˜:', error);
        alert('í•´ëª… ì¶”ê°€ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    }
}

    // ì‚­ì œ í•¨ìˆ˜
    async function deletePost(postId) {
        try {
            if (!confirm('ì •ë§ ì´ ê²Œì‹œë¬¼ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                return;
            }

            const response = await fetch(`/post/${postId}`, {
                method: 'DELETE',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ 
                    username: username,
                    isMaster: isMasterUser(username)
                })
            });

            if (!response.ok) {
                const data = await response.json();
                throw new Error(data.error || 'ì‚­ì œ ì‹¤íŒ¨');
            }

            alert('ê²Œì‹œë¬¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            window.location.reload();
            
        } catch (error) {
            console.error('ì‚­ì œ ì˜¤ë¥˜:', error);
            alert(error.message || 'ê²Œì‹œë¬¼ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        }
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‚¬ìš©ì ì •ë³´ í‘œì‹œ
    document.addEventListener('DOMContentLoaded', function() {
        const currentUsername = document.getElementById('currentUsername');
        if (currentUsername) {
            currentUsername.textContent = username;
        }
    });
   
    


        function showThinking(event) {
        event.preventDefault();
        const messages = [
            "ìŒ... ë­˜ ì¶”ê°€í•˜ë©´ ì¢‹ì„ê¹Œìš”? ğŸ¤”",
            "ì•„ì§ ê³ ë¯¼ì¤‘ì…ë‹ˆë‹¤... ğŸ’­",
            "ì¢‹ì€ ì•„ì´ë””ì–´ ìˆìœ¼ì‹ ê°€ìš”? ğŸ’¡",
            "ê³§ ì¶”ê°€ë  ì˜ˆì •ì…ë‹ˆë‹¤! â³",
            "ì—´ì‹¬íˆ ìƒê°í•˜ëŠ” ì¤‘... ğŸ§",
            "ì™œ ìê¾¸ ëˆŒëŸ¬ë³´ì‹œëŠ” ê±°ì£ ?ğŸ˜’",
            "í•  ì¼ì´ ì—†ìœ¼ì‹ ê°€ìš”?ğŸ˜",
            "ë‹¹ì‹ ì€ ì‹œê°„ ë‚­ë¹„ë¥¼ í•˜ê³  ê³„ì‹­ë‹ˆë‹¤ğŸ˜œ",
            "ì†ê°€ë½ ì•ˆì•„í”„ì‹ ê°€ìš”?ğŸ‘€",
            "ê³ ì–‘ì´ê°€ ë¨¸ë¦¬ë¥¼ í•˜ë©´? ë¯¸ìš©~ ë¯¸ìš©~ğŸ±ã…‹ã…‹",
            "ì—„ë§ˆê°€ ë„ë‘‘ì§ˆí•˜ë©´? ëª¨ì„œë¦¬ğŸ‘µã…‹ã…‹",
            "ë–¡ì§‘ ì‚¬ì¥ì´ ì£¼ì‹ì„ ì•ˆ í•˜ëŠ” ì´ìœ ëŠ”? ë–¡ ìƒí• ê¹Œë´ğŸ¥®ã…‹ã…‹",
            "ì˜¤ë¦¬ê°€ ì¡°ìš©íˆ ë§í•˜ë©´? ë•ìˆ˜ê¶ ìˆ˜ê¶ğŸ¦¢ã…‹ã…‹",
        ];
        const randomMessage = messages[Math.floor(Math.random() * messages.length)];
        alert(randomMessage);
        
        // ì´ëª¨ì§€ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
        const emoji = event.target.querySelector('ğŸ¤”');
        if (emoji) {
            emoji.classList.add('thinking-animation');
            setTimeout(() => {
                emoji.classList.remove('thinking-animation');
            }, 1000);
        }
    }


    async function displayUserInfo() {
    try {
        const username = localStorage.getItem('username');
        if (!username) return;

        const response = await fetch(`/user/${username}`);
        const userData = await response.json();

        // ë“±ê¸‰ ì•„ì´ì½˜ ì„¤ì •
        const levelIcons = {
            'ì£ë°¥': 'ğŸ‘',
                'ì¼ë°˜ì¸': 'ğŸ‘¨â€ğŸ¦²',
                'ë…¼ë€ ì‘ê°€': 'âœ',
                'ë…¼ë€ì˜ ë‹¬ì¸': 'ğŸ’ ',
                'ë…¼ë€ì˜ ì‹ ': 'ğŸ’',
                'ë…¼ë€ ê·¸ìì²´': 'ğŸ‘‘'
        };

        const userInfoHTML = `
            <div class="user-info">
                <span class="user-level">${levelIcons[userData.level]} ${userData.level}</span>
                <span class="user-exp">EXP: ${userData.exp}</span>
            </div>
        `;

        // ì‚¬ìš©ì ì •ë³´ë¥¼ í‘œì‹œí•  ìœ„ì¹˜ì— ì‚½ì…
        const userInfoContainer = document.getElementById('userInfo');
        if (userInfoContainer) {
            userInfoContainer.innerHTML = userInfoHTML;
        }
    } catch (error) {
        console.error('ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ ì˜¤ë¥˜:', error);
    }
}






// ê²½í—˜ì¹˜ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
async function updateUserExp(username, expAmount) {
    try {
        const response = await fetch(`/user/${username}/exp`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ expAmount })
        });

        const data = await response.json();
        
        // UI ì—…ë°ì´íŠ¸ë§Œ ìˆ˜í–‰
        displayUserInfo();
        
    } catch (error) {
        console.error('ê²½í—˜ì¹˜ ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:', error);
    }
}

  </script>
    </script>
    <!-- Optional JavaScript -->
    
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
  </body>
</html>
